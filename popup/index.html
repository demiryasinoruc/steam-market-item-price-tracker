<!DOCTYPE html>
<html lang="en">
  <head>
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self' 'unsafe-eval';"
    />

    <meta charset="UTF-8" />
    <link rel="stylesheet" href="./index.css" />
  </head>

  <body>
    <div id="app">
      <div class="container-fluid p-0">
        <div class="card">
          <div class="card-body">
            <div class="row">
              <div class="col">
                <h5 class="mb-3">
                  {{ translations.trackingList }} ({{ trackings.length }})
                </h5>
                <ul v-if="trackings.length > 0" class="list-group mt-3">
                  <li
                    v-for="tracking in trackingList"
                    :key="tracking.appid"
                    class="list-group-item"
                  >
                    <span> {{ tracking.appname }} </span>
                    <span class="badge badge-danger float-right mt-1">
                      {{ itemCountsMessage(tracking.count) }}
                    </span>
                  </li>
                </ul>
                <div v-else class="alert alert-info">
                  <i class="fa fa-info-circle"></i>
                  {{ translations.trackingListEmpty }}
                </div>
              </div>
            </div>
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-sm-12">
                <h5>
                  {{ translations.notifications }} ({{ notifications.length }})
                  <span
                    class="btn btn-link float-right"
                    :disabled="openAllStatus"
                    @click="openAll"
                  >
                    {{ translations.openAll }}
                  </span>
                </h5>
                <div class="clearfix"></div>
                <div
                  v-for="(notification, index) in notificationList"
                  :key="index"
                  class="d-flex justify-content-end border mt-2"
                >
                  <button
                    class="btn btn-link text-left flex-fill"
                    target="_blank"
                    :title="translations.openListingPage"
                    @click="openListingPage(notification)"
                  >
                    {{ notification.item.name }}
                  </button>
                  <button
                    class="btn btn-outline-warning m-1"
                    :title="translations.triggerNotification"
                    @click="triggerNotification(notification)"
                  >
                    <i class="fa fa-refresh"></i>
                  </button>
                  <button
                    class="btn btn-outline-danger m-1"
                    :title="translations.triggerNotification"
                    @click="removeNotification(notification)"
                  >
                    <i class="fa fa-times"></i>
                  </button>
                </div>
                <div
                  v-show="notifications.length === 0"
                  class="alert alert-info"
                >
                  <i class="fa fa-info-circle"></i>
                  {{ translations.noNewNotification }}
                </div>
              </div>
            </div>
          </div>
          <div class="card-footer">
            <div class="row">
              <div class="col-3">
                <span class="version">
                  {{ translations.version }}: <strong> {{ version }}</strong>
                </span>
              </div>
              <div class="col-9 text-right">
                <a
                  :title="translations.goToChangelog"
                  class="btn btn-outline-primary"
                  target="_blank"
                  :href="changeLog"
                >
                  <i class="fa fa-history"></i>
                </a>
                <a
                  :title="translations.goToTwitter"
                  class="btn btn-outline-info"
                  target="_blank"
                  href="https://twitter.com/steamextensions"
                >
                  <i class="fa fa-twitter"></i>
                </a>
                <span class="mx-2">|</span>
                <button
                  v-show="status"
                  class="btn btn-outline-success"
                  :title="translations.pause"
                  @click="changeStatus(false)"
                >
                  <i class="fa fa-pause"></i>
                </button>
                <button
                  v-show="!status"
                  class="btn btn-outline-warning"
                  :title="translations.continue"
                  @click="changeStatus(true)"
                >
                  <i class="fa fa-play"></i>
                </button>
                <button
                  class="btn btn-outline-primary"
                  :title="translations.openTrackingList"
                  @click="openPage('list.html')"
                >
                  <i class="fa fa-list"></i>
                </button>
                <button
                  class="btn btn-outline-info"
                  :title="translations.openSettings"
                  @click="openPage('options.html')"
                >
                  <i class="fa fa-cog"></i>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="../common/keys.js"></script>
    <script src="../common/constants.js"></script>
    <script src="../libs/vue.js"></script>
    <script src="./index.js"></script>
  </body>
</html>
